(()=>{const s=localStorage.getItem("display_antrian"),a=window.location.origin;window.logout=()=>{localStorage.removeItem("display_antrian"),setTimeout(()=>{window.location.reload()},300)};window.resetDisplay=()=>{fetch("./reset/"+s,{method:"POST",body:JSON.stringify({no:no.value,counter:counter.value})}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>{call.disabled=!0,setTimeout(()=>{call.disabled=!1},7e3)}).catch(e=>{e.json().then(o=>{alert(o.message)})})};if(s){const e=document.getElementById("my_form"),o=document.getElementById("call");e.style.display="block";const l=document.getElementById("url_display"),i=document.getElementById("display_name");l.innerHTML=a+"/display",l.href=a+"/display",i.innerHTML=s,l.target="_blank";const r=document.getElementById("no"),d=document.getElementById("counter"),c=document.getElementById("form");window.resetDisplay=()=>{fetch(a+"/reset/"+s,{method:"POST"}).then(t=>{if(!t.ok)throw t;return t.json()}).then(t=>{r.value=void 0,d.value=void 0,alert("Success reset display")}).catch(t=>{t.json().then(n=>{alert(n.message)})})},c.onsubmit=function(t){t.preventDefault(),o.disabled!==!0&&fetch(a+"/send/"+s,{method:"POST",body:JSON.stringify({no:r.value,counter:d.value})}).then(n=>{if(!n.ok)throw n;return n.json()}).then(n=>{o.disabled=!0,setTimeout(()=>{o.disabled=!1},7e3)}).catch(n=>{n.json().then(m=>{alert(m.message)})})}}else{const e=document.getElementById("my_create_form");e.style.display="block";const o=document.getElementById("display_form"),l=document.getElementById("display");o.onsubmit=function(i){i.preventDefault(),localStorage.setItem("display_antrian",l.value),setTimeout(()=>{window.location.reload()},500)}}})();
